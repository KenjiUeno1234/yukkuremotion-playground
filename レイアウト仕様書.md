### 1. 全体構造

動画は3つのレイヤーで構成される：

* BACKGROUND_LAYER
* SLIDE_PANEL_LAYER
* CHARACTER_LAYER

背景 → スライド → キャラ の順に重ねる。

---

### 2. BACKGROUND_LAYER

* 画面全体を覆う背景画像を固定表示する。
* 背景にはSF風のインターフェイス装飾を含んでもよい。
* スライドを置く中央部は視認性を高めるため暗めのトーンを入れる。

---

### 3. SLIDE_PANEL_LAYER

* 左寄せに大きな矩形パネルを配置する。
* パネルは UI フレームとしてデザインし、枠や光沢を含む。
* パネル内部の中央をスライド表示領域とする。
* スライド画像はアスペクト比を保持し、パネルにフィットさせる。

---

### 4. CHARACTER_LAYER

* キャラクター立ち絵を画面右側に配置する。
* 最前面で表示する。
* キャラクターの位置はスライドと重ならないように調整する。
* 目パチ・口パクのアニメーションは別のアニメーションロジックで制御する。

---

### 5. 台詞（字幕）

* スライドパネルの下端、またはキャラクター付近にテキスト表示。
* 色は白 or 緑、縁取りつき。
* キャラクターの読み上げタイミングと同期する。

---

## カスタムレイアウト実装詳細

### 背景画像（BACKGROUND_LAYER）

**実装箇所：** `src/YukkuriVideo.tsx`

```typescript
{section.backgroundImage && (
  <Img
    src={staticFile(section.backgroundImage)}
    style={{
      width: '100%',
      height: '100%',
      objectFit: 'cover',
    }}
  />
)}
```

**設定方法：**
- `transcripts/myvideo.tsx` の `backgroundImage` プロパティで画像パスを指定
- 画像ファイルは `public/` フォルダ以下に配置
- `objectFit: 'cover'` により画面全体を覆うように表示

---

### カスタム人物画像（CHARACTER_LAYER）

**実装箇所：**
- `src/yukkuri/YukkuriSequence.tsx` - 人物表示ロジック
- `src/yukkuri/Face/YukkuriFace.tsx` - 画像レンダリング

**表示条件：**
```typescript
{customReimuImagePath ? (
  <div style={centerCharacterStyle}>
    <YukkuriFace isReimu customImagePath={customReimuImagePath} sizePx={380} />
  </div>
) : (
  // デフォルトのゆっくりキャラクター（霊夢・魔理沙）
)}
```

**配置設定：**
```typescript
const centerCharacterStyle: React.CSSProperties = {
  position: 'absolute',
  right: '60px',
  bottom: '120px',
  zIndex: zIndex.yukkuri,
};
```

**アニメーション制御：**
```typescript
// カスタム画像の場合はふわふわアニメーションを無効化
const translateY = customImagePath ? 0 : interpolate(frame, frames, intervals, {
  easing: Easing.bezier(0.51, 0, 0.49, 1),
});
```

---

### 字幕表示

**実装箇所：**
- `src/Subtitle/SubtitleBackground.tsx` - 字幕背景
- `src/Subtitle/Subtitle.tsx` - テキストスタイル

**字幕背景：**
```typescript
const jimakuBackground: React.CSSProperties = {
  position: 'absolute',
  width: '100%',
  height: `${SUBTITLE_HEIGHT_PX}px`,
  bottom: 0,
  left: 0,
  backgroundColor: '#062722',  // 濃い緑色の背景
  opacity: 1,
  paddingLeft: '40px',
  paddingRight: '40px',
  textAlign: 'left',
};
```

**テキストスタイル：**
```typescript
const subtitle: React.CSSProperties = {
  fontFamily: 'GenshinGothic',
  fontSize: 48,
  fontWeight: 'bold',
  color: '#DEFFEE',  // 明るい緑色
  textAlign: 'left',
};
```

**特徴：**
- 画面下部に横長の帯として表示
- 背景色: `#062722`（濃い緑）、不透明度100%
- テキスト色: `#DEFFEE`（明るい緑）
- 左寄せ表示
- テキストストローク（縁取り）なし（シンプルなデザイン）

---

### レイヤー構成と z-index

**レイヤーの重なり順（下から上）：**
1. 背景画像（BACKGROUND_LAYER）
2. 字幕背景（`zIndex.subtitle`）
3. 人物画像（`zIndex.yukkuri`）
4. その他UI要素（ロゴなど）（`zIndex.anyValue`）

**設定場所：** `src/constants.ts`
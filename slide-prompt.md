あなたはスライド作成のエキスパートです。
以下の台本のセリフから、効果的なスライド構成（Marp 用 JSON）を生成してください。

#### 台本のセリフ
${dialogues.map((d, i) => `${i + 1}. ${d}`).join('\n')}

#### タスク
- 上記のセリフを元に、スライドのテンプレートを適切に使い分けてスライド構成（{"slides":[ ... ]}）を JSON 形式で「slides_plan.json」という名称で生成してください。
- 出力形式はslides_plan-format.jsonを参考にしてください。
- テンプレート（例： `template: "strong-message.md"` ）の中から選択し、テンプレート以外は利用しないでください。
- テンプレートを選択する際は、*テンプレート一覧と使い分けルール*を参照し、適切なテンプレートを選択してください。
- この時点では **CSSもHTMLも書きません。


#### テンプレート一覧と使い分けルール

## 1. strong-message（強調メッセージ）
- 最重要メッセージを一言で見せる。
- 問題提起・キーメッセージ・区切り・ラストの決め台詞に使う。
- 図やスクショを見せる時は使わない。
- **セクションの冒頭や結論に使用**

形式：
{
  "type": "strong-message",
  "props": { "text": "短くインパクトのある一文" }
}

---

## 2. list-3（3行リスト）
- 要素が3つのとき。
- アジェンダ、3ステップ、3つのポイントなど。

形式：
{
  "type": "list-3",
  "props": {
    "title": "スライドタイトル",
    "items": ["①", "②", "③"]
  }
}

---

## 3. list-4（4行リスト）
- 要素が4つのとき。
- 課題・原因・特徴などが4つある場合。

形式：
{
  "type": "list-4",
  "props": {
    "title": "スライドタイトル",
    "items": ["①", "②", "③", "④"]
  }
}

---

## 4. list-5（5行リスト）
- 要素が5つのとき。
- チェックリスト、アクションプラン、条件など。

形式：
{
  "type": "list-5",
  "props": {
    "title": "スライドタイトル",
    "items": ["①", "②", "③", "④", "⑤"]
  }
}

※6個以上になる場合は複数スライドに分ける。

---

## 5. illustrations（イラストつきスライド）
- 感覚的・象徴的なメッセージやイメージを伝える。
- 理想像、世界観、感情ニュアンスを見せたいとき。
- **台本に具体的なイメージの描写がある場合のみ使用**

形式：
{
  "type": "illustrations",
  "props": {
    "title": "スライドタイトル",
    "imagePrompt": "誰が・何をしていて・どんな雰囲気か",
    "caption": "必要なら補足説明"
  }
}

---

## 6. screenshots（スクリーンショット）
- ツールや画面、操作例が必要な箇所。
- **台本にツール名や画面の具体的な言及がある場合のみ使用**

形式：
{
  "type": "screenshots",
  "props": {
    "title": "スライドタイトル",
    "target": "どの画面のスクショか",
    "note": "注目ポイント"
  }
}

---

# スライド設計ルール

## 基本原則
- **1セクション = 1スライドを基本とする**
- 同じsection_idの複数セリフは1枚にまとめる
- 台本の順番を尊重する
- **スライド総数はセクション数±2枚程度に収める**

## テンプレート選択指針
- **「強い一言」の場合のみ** → strong-message
- **同じセクションに3〜5個の要素** → list系（要素数に応じて選択）
- **2個以下の短い要素** → strong-messageにまとめるか、list-3にして他の要素と統合
- **画面が台本で明示されている** → screenshots
- **イメージの描写が台本にある** → illustrations
- **それ以外** → 基本的にlist系を使う

## テキスト処理
- 口語は短く圧縮し、主語と述語を明確にする
- 「〜ですよね」「〜なんですね」などの口語表現を削除
- 同じ意味のメッセージが連続する場合は1枚にまとめる
- 長い話題は「問題 → 解決 → 効果」のように2〜3枚に分けてもよい

## まとめ方の具体例

### 例1: 同じセクションの複数セリフをまとめる
```
セリフ:
1. 「結論から言うとね、『言われた通りに見た目を整えるだけ』の仕事だったら、」
2. 「たしかに厳しくなってくるかもしれないの。」
3. 「Nano Banana Proの方が、安くて、早くて、しかも出来も悪くないからね。」
4. 「でもね、サムネイルって、ただ綺麗に見せればいいわけじゃなくて、」
5. 「ちゃんとクリックされるかどうか、つまり成果が伴うかがすごく大事なの。」
6. 「視聴者が『この動画、見たい！』って思えるかどうかっていうところね。」

↓ まとめる ↓

{
  "section_id": "S002",
  "type": "list-3",
  "props": {
    "title": "AIツール vs 人間の価値",
    "items": [
      "見た目を整えるだけの仕事 → AIが安く・早く・高品質",
      "でも綺麗さだけが全てではない",
      "クリックされるか・成果が伴うかが重要"
    ]
  }
}
```

### 例2: セクション冒頭にstrong-message
```
セリフ:
S001-1: 「最近、Nano Banana ProっていうAIツールが話題になってるでしょ？」
S001-2〜6: （導入の説明）

↓ セクション冒頭の強いメッセージ ↓

{
  "section_id": "S001",
  "type": "strong-message",
  "props": {
    "text": "AIツール登場でサムネ制作はどうなる？"
  }
}
```

---

# 出力フォーマット（厳守）
- 必ず有効な JSON としてパース可能な形で出力すること。
- ルートは次の形式のみ：
{"slides":[ ... ]}
- コメントや日本語の説明文は禁止（JSON のみ）。

---

# チェックリスト

生成前に以下を確認してください：

✅ **テンプレート選択**: 各セクションで適切なテンプレートが選ばれている
✅ **テキスト圧縮**: 口語が書き言葉に変換され、冗長性が排除されている
✅ **論理構造**: セリフの順序と意味の塊が保持されている
✅ **スライド枚数**: セクション数±2枚程度に収まっている（過度な分割を避ける）
✅ **title設定**: list系テンプレートで適切なタイトルが付けられている
✅ **6個以上の禁止**: 1枚に6個以上の要素が入っていない
✅ **同じsection_id**: 同じセクションのセリフは基本的に1枚にまとめる

❌ **避けるべきこと**:
- strong-messageに長文を入れる
- 1セリフを無理にlistに分割
- セリフの口語表現がそのまま残る
- section_idが混在する（違うセクションを1枚にまとめない）
- セリフの順序が入れ替わる
- スライド枚数が極端（3枚以下 or 20枚以上）
- 台本に言及のないscreenshotsやillustrationsを使う

手順1.dialogues.jsonを作る
`script_final.md` には

- セクション見出し
    
- スライドメタ (`<!-- slide: ... -->`)
    
- セリフ（`- NARRATOR: ...`）  
が混ざっている。`script_final.md` からNARRATORの「セリフだけ」の配列をdialogues.jsonとして出力してください。


手順2. slides_plan.json を作る

dialogues.json からsrc\slide-pattern\slide-prompt.mdを参照し、プロンプトの指示に従ってJSON で生成してください。 

例えば、
> このセクションは「黒板背景でドーンと一言だけ強調したい」

と判断したときに、AIがこういう JSON を吐くイメージ：

`{   "section_id": "S010",   "template": "big_center_chalkboard",   "text": "強調メッセージ" }`

- この時点では **CSSもHTMLも書かない**
    
- ただし `template: "big_center_chalkboard"` という「テンプレのキー」だけは決める

テンプレは\src\slide-patternにあります。

ここまでが slides_plan.json を作る側の仕事です。

手順3. json → Markdown →PDFに変換

Marpテンプレの中身（CSS / div / layout）に従ってslides_plan.jsonからslides_plan.mdを作成してほしい。
slides_plan.mdを作成するとき、イメージで書くと、TypeScript側にこんな感じのレンダラーを用意する：

``type BigCenterChalkboardConfig = {   template: "big_center_chalkboard";   section_id: string;   text: string; };  export function renderBigCenterChalkboard(   slide: BigCenterChalkboardConfig ): string {   return [     "---",     "marp: true",     "backgroundImage: url('chalkboard.png')",     "---",     "",     "<style>",     ".big-center {",     "  display: flex;",     "  justify-content: center;",     "  align-items: center;",     "  height: 500px;",     "  font-size: 64px;",     "  font-weight: 700;",     "  color: #ffffff;",     "  text-shadow: 0 0 8px rgba(0,0,0,0.7);",     "}",     "</style>",     "",     `<!-- ${slide.section_id} -->`,     "",     '<div class="big-center">',     slide.text,     "</div>"   ].join("\n"); }``

で、メインの変換側で：
`function renderSlide(slide: SlideConfig): string {   switch (slide.template) {     case "big_center_chalkboard":       return renderBigCenterChalkboard(slide);     // 他テンプレも case で分ける   } }`

。src\slide-pattern配下のテンプレの中身（CSS / div / layout）を参考にして。
そのあとに、marp "slides_plan.md" -o "slides_plan.pdf"コマンドでPDFを作成してほしい。
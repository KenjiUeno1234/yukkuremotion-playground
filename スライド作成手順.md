##手順1.dialogues.jsonを作る
`script_final.md` には

- セクション見出し
    
- スライドメタ (`<!-- slide: ... -->`)
    
- セリフ（`- NARRATOR: ...`）  
が混ざっている。`script_final.md` からNARRATORの「セリフだけ」の配列を「dialogues.json」の名称で出力してください。出力形式は「dialogues-format.json」を参考にしてください。


##手順2. slides_plan.json を作る
スライド作成プロンプト（src\slide-pattern\slide-prompt-templete.md）を参照し、プロンプトの指示に従って「slides_plan0.json」を生成してください。 

##手順3.自動チューニング
「slides_plan.json」の結果が、「評価基準及びデータ（src\slide-pattern\templates.md）」に基づいて、妥当な結果になっているかを評価し、スライド作成プロンプトをチューニングしたプロンプトを「slide-prompt.md」として出力してください。

##手順4. slides_plan.json を作る
自動チューニングしたスライド作成プロンプト（src\slide-pattern\slide-prompt.md）を参照し、プロンプトの指示に従って「slides_plan.json」を生成してください。 


##手順5. json → Markdown →PDFに変換

Marpテンプレの中身（CSS / div / layout）に従ってslides_plan.jsonからslides_plan.mdを作成してほしい。

**重要: 日本語フォント設定**
- 日本語の文字化けを防ぐため、すべてのCSS要素に `font-family` を設定すること
- 推奨フォント: `font-family: "Yu Gothic", "Hiragino Kaku Gothic ProN", "Meiryo", sans-serif;`
- 設定が必要な要素: `section`, `h1`, `h2`, `h3`, `.big-center`, `.list-index`, `.list-item` など

**重要: Canva互換性のための設定**
- **背景はシンプルな単色を使用**すること（グラデーションはCanvaで正しく表示されない）
- **text-shadowは使用しない**こと（Canvaで黒い背景として誤認識される）
- 推奨背景色: `background: #f0f8ff;`（淡いブルー単色）
- 文字色: `color: #003a8c;`（濃いブルー）

**重要: Marpメタデータの記載ルール**
- Marpのメタデータは**最初のスライドにのみ**記載すること
- 2枚目以降のスライドは `---` のみで区切り、メタデータは記載しない
- これによりPDFにメタデータが表示されることを防ぐ
- **ページ番号を非表示にするため `paginate: false` を設定すること**

**メタデータ設定:**
```markdown
---
marp: true
paginate: false
theme: default
---

<style>
/* 1枚目のスタイル */
</style>

<!-- S001 -->
<div class="big-center">タイトル</div>

---

<style>
/* 2枚目以降のスタイル */
</style>

<!-- S002 -->
# 見出し
内容...

---

<!-- S003 -->
# 見出し
内容...
```

slides_plan.mdを作成するとき、イメージで書くと、TypeScript側にこんな感じのレンダラーを用意する：

``type BigCenterChalkboardConfig = {   template: "big_center_chalkboard";   section_id: string;   text: string; };  export function renderBigCenterChalkboard(   slide: BigCenterChalkboardConfig ): string {   return [     "---",     "marp: true",     "backgroundImage: url('chalkboard.png')",     "---",     "",     "<style>",     ".big-center {",     "  display: flex;",     "  justify-content: center;",     "  align-items: center;",     "  height: 500px;",     "  font-size: 64px;",     "  font-weight: 700;",     "  color: #ffffff;",     "  text-shadow: 0 0 8px rgba(0,0,0,0.7);",     "  font-family: \"Yu Gothic\", \"Hiragino Kaku Gothic ProN\", \"Meiryo\", sans-serif;",     "}",     "</style>",     "",     `<!-- ${slide.section_id} -->`,     "",     '<div class="big-center">',     slide.text,     "</div>"   ].join("\n"); }``

で、メインの変換側で：
`function renderSlide(slide: SlideConfig): string {   switch (slide.template) {     case "big_center_chalkboard":       return renderBigCenterChalkboard(slide);     // 他テンプレも case で分ける   } }`

。src\slide-pattern配下のテンプレの中身（CSS / div / layout）を参考にして。
そのあとに、`npx @marp-team/marp-cli slide-out/slides_plan.md -o slide-out/slides_plan.pdf` コマンドでPDFを作成してほしい。
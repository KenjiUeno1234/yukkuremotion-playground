あなたはスライド作成のエキスパートです。
以下の台本のセリフから、効果的なスライド構成（Marp 用 JSON）を生成してください。

#### 台本のセリフ
${dialogues.map((d, i) => `${i + 1}. ${d}`).join('\n')}

#### タスク
- 上記のセリフを元に、スライドのテンプレートを適切に使い分けてスライド構成（{"slides":[ ... ]}）を JSON 形式で「slides_plan.json」という名称で生成してください。
- 出力形式はslides_plan-format.jsonを参考にしてください。
- テンプレート（例： `template: "strong-message.md"` ）の中から選択し、テンプレート以外は利用しないでください。
- テンプレートを選択する際は、*テンプレート一覧と使い分けルール*を参照し、適切なテンプレートを選択してください。
- この時点では **CSSもHTMLも書きません**。


#### テンプレート一覧と使い分けルール

## 1. strong-message（強調メッセージ）
- 最重要メッセージを一言で見せる。
- 問題提起・キーメッセージ・区切り・ラストの決め台詞に使う。
- 図やスクショを見せる時は使わない。
- **セクション見出しそのものを使う**ことが多い。

形式：
{
  "type": "strong-message",
  "props": { "text": "短くインパクトのある一文" }
}

---

## 2. list-3（3行リスト）
- 要素が3つのとき。
- アジェンダ、3ステップ、3つのポイントなど。
- **同じセクションの3つのセリフをまとめる際に使用**。

形式：
{
  "type": "list-3",
  "props": {
    "title": "スライドタイトル",
    "items": ["①", "②", "③"]
  }
}

---

## 3. list-4（4行リスト）
- 要素が4つのとき。
- 課題・原因・特徴などが4つある場合。
- **セリフが本当に4つ必要な場合のみ使用**。無理に4つにしない。

形式：
{
  "type": "list-4",
  "props": {
    "title": "スライドタイトル",
    "items": ["①", "②", "③", "④"]
  }
}

---

## 4. list-5（5行リスト）
- 要素が5つのとき。
- チェックリスト、アクションプラン、条件など。
- **同じセクションの5つのセリフをまとめる際に使用**。

形式：
{
  "type": "list-5",
  "props": {
    "title": "スライドタイトル",
    "items": ["①", "②", "③", "④", "⑤"]
  }
}

※6個以上になる場合は複数スライドに分ける。

---

## 5. illustrations（イラストつきスライド）
- 感覚的・象徴的なメッセージやイメージを伝える。
- 理想像、世界観、感情ニュアンスを見せたいとき。

形式：
{
  "type": "illustrations",
  "props": {
    "title": "スライドタイトル",
    "imagePrompt": "誰が・何をしていて・どんな雰囲気か",
    "caption": "必要なら補足説明"
  }
}

---

## 6. screenshots（スクリーンショット）
- ツールや画面、操作例が必要な箇所。

形式：
{
  "type": "screenshots",
  "props": {
    "title": "スライドタイトル",
    "target": "どの画面のスクショか",
    "note": "注目ポイント"
  }
}

---

# スライド設計ルール

## 基本原則
- **1セクション = 1スライド** を基本とする。
- 台本の順番を厳守する。セリフの順序を入れ替えない。
- **同じsection_idのセリフは必ず1枚のスライドにまとめる**。
- 異なるsection_idのセリフを混ぜない。

## テンプレート選択基準
- 「強い一言」「セクション見出しそのもの」→ **strong-message**
- 「同じセクションで3つのセリフ」→ **list-3**
- 「同じセクションで4つのセリフ」→ **list-4**
- 「同じセクションで5つのセリフ」→ **list-5**
- 「画面が重要」→ **screenshots**
- 「感覚的・象徴的」→ **illustrations**

## テキスト圧縮ルール（重要）
- **口語表現を書き言葉に変換**する。
  - 「〜ですよね」「〜なんです」「〜ますよね」などは削除または簡潔化。
  - 「っていう」→「という」、「〜だったりする」→「〜である」
- **主語と述語を明確にする**。
- **冗長な表現を削除**する。
  - 「さらにもうひとつ」「そして次に」などの接続詞は不要。
  - 核心だけを残す。
- **1項目は1文〜2文程度**に収める。長い説明は分割しない。

## 悪い例と良い例

### 悪い例❌
```json
{
  "section_id": "S004",
  "type": "list-4",
  "props": {
    "title": "問い②：入力上限に収まるか？",
    "items": [
      "GPT/Claudeは10〜20万字、Geminiは100万字以上",
      "意外と全部入ってしまう",
      "コストはほんのわずか",
      "複雑なRAGより安く・速く・安定"
    ]
  }
}
```
**問題点**: 4項目に無理に分割。2行目「意外と全部入ってしまう」は冗長。

### 良い例✅
```json
{
  "section_id": "S004",
  "type": "list-3",
  "props": {
    "title": "問い②：入力上限に収まる？",
    "items": [
      "GPTやClaudeは10〜20万字、Geminiなら100万字以上入る時代",
      "全文を入れてもコストはごくわずか",
      "RAGを作り込むより速くて安定していることが多い"
    ]
  }
}
```
**改善点**: 冗長な表現を削除し、3項目に圧縮。口語「〜なんですね」を削除。

---

### 悪い例❌
```json
{
  "section_id": "S005",
  "type": "list-4",
  "props": {
    "title": "問い③：パターン数は？",
    "items": [
      "さらにもうひとつの観点",
      "パターン数はどれくらいか",
      "10〜20パターンならテンプレート化が最適",
      "業界別プロンプトは使い回しが簡単で精度・運用性も良い"
    ]
  }
}
```
**問題点**: 1行目「さらにもうひとつの観点」は不要。2行目はタイトルと重複。

### 良い例✅
```json
{
  "section_id": "S005",
  "type": "list-3",
  "props": {
    "title": "問い③：パターンは何個？",
    "items": [
      "パターンが10〜20種類くらいならテンプレート化が最適",
      "業界別に作っておけば使い回しも簡単",
      "精度も運用も申し分ない"
    ]
  }
}
```
**改善点**: 不要な接続詞を削除。内容を3つに整理し、1項目1メッセージに。

---

### 悪い例❌
```json
{
  "section_id": "S008",
  "type": "list-4",
  "props": {
    "title": "今日覚えておきたいこと",
    "items": [
      "RAGは部分を取り出す仕組み",
      "全部読ませたいなら向かない、収まるなら全文投入が合理的",
      "パターンが少ないならテンプレ化で十分",
      "状況に合わせて柔軟に選ぶことが鍵"
    ]
  }
}
```
**問題点**: 2行目が長すぎて2つのメッセージが混在。

### 良い例✅
```json
{
  "section_id": "S008",
  "type": "list-5",
  "props": {
    "title": "今日のポイント",
    "items": [
      "RAGは"部分を取り出す技術"",
      "全部読む用途には向かない",
      "入力が収まるなら全文投入でOK",
      "パターンが少ないならテンプレ化が最善",
      "要は、状況に合わせて賢く選ぶことが大切"
    ]
  }
}
```
**改善点**: 1項目1メッセージに分離。list-5で正確に5つの要素を表現。

---

# 出力フォーマット（厳守）
- 必ず有効な JSON としてパース可能な形で出力すること。
- ルートは次の形式のみ：
{"slides":[ ... ]}
- コメントや日本語の説明文は禁止（JSON のみ）。
- **section_idは必ず元のセリフのものを使用**し、混在させない。

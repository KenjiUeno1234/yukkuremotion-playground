# スライド生成の評価基準とテンプレート例

## 評価基準

スライド生成の結果を評価する際は、以下の観点を重視してください。

### 1. テンプレート選択の妥当性

#### ✅ 良い例
- **strong-message**: セクションの冒頭やキーメッセージに使用
  - 例: 「なんでもかんでもRAGじゃない」
- **list-3**: 3つの要素を持つ説明や議論展開
  - 例: 「問い①：全部参照する？」で3点の説明
- **list-4**: 4つの要素を持つ列挙
- **list-5**: 5つの要素を持つまとめや総括
  - 例: 「今日のポイント」で5点を列挙
- **illustrations**: 抽象的概念や感情的メッセージ
- **screenshots**: ツールや操作手順の説明

#### ❌ 悪い例
- セリフが1文しかないのにlist-3を使う
- 強いメッセージ性があるのにlistを使う
- 6個以上の要素を1枚のスライドに詰め込む
- セリフの文体（口語）をそのままスライドに転記する

---

### 2. テキスト圧縮の適切性

#### ✅ 良い例
- **口語 → 書き言葉への変換**
  ```
  セリフ: 「最近、『自社データならRAGでしょ』っていう空気がありますよね。」
  スライド: 「よくある相談：『RAGを入れないとダメですよね?』」
  ```

- **冗長性の排除**
  ```
  セリフ: 「GPTやClaudeは10〜20万字、Geminiなら100万字以上入る時代です。実は、全文を入れてもコストはごくわずか。」
  スライド:
    - GPTやClaudeは10〜20万字、Geminiなら100万字以上入る時代
    - 全文を入れてもコストはごくわずか
  ```

- **主語と述語の明確化**
  ```
  ❌ 「入れたらダメ」
  ✅ 「RAGは必要ない」
  ```

#### ❌ 悪い例
- セリフをそのままコピー&ペースト
- 「〜ですよね」「〜なんですね」などの口語表現が残る
- 主語が省略されて意味が不明瞭

---

### 3. 論理構造の保持

#### ✅ 良い例
- **セリフの順序を尊重**
  - S001 → S002 → S003 の順でスライドを生成

- **意味の塊でグルーピング**
  ```
  S003の3つのセリフ → 1枚のlist-3スライドにまとめる
  ```

- **問題→解決→効果の流れを保つ**
  ```
  S002: 問題提起（RAGが万能ではない）
  S003: 判断基準①
  S004: 判断基準②
  S005: 判断基準③
  S006: まとめ
  ```

#### ❌ 悪い例
- セリフの順序を無視して再配置
- 1つのセリフを複数スライドに分割
- 異なるセクションのセリフを1枚にまとめる

---

### 4. スライド枚数の適切性

#### ✅ 良い例
- 9セクション → 9枚のスライド（セクションごとに1枚）
- 連続する3つのセリフ → 1枚のlist-3
- 強調メッセージ1文 → 1枚のstrong-message

#### ❌ 悪い例
- 9セクション → 20枚以上（過度な分割）
- 9セクション → 3枚以下（過度な統合）
- 1セリフ → 複数枚（不必要な分割）

---

## 理想的な出力例

以下は実際の良質な生成例です。

### 入力例: dialogues.json（一部抜粋）

```json
[
  {
    "section_id": "S001",
    "slide_index": 1,
    "dialogue": "「自社データならRAGでしょ」と言われがちですが、実はそうとも限りません。"
  },
  {
    "section_id": "S001",
    "slide_index": 2,
    "dialogue": "まずは、その思い込みをそっとほどいていきましょう。"
  }
]
```

### 理想的な出力: slides_plan.json

```json
{
  "section_id": "S001",
  "type": "strong-message",
  "props": {
    "text": "なんでもかんでもRAGじゃない"
  }
}
```

**評価ポイント:**
- ✅ 2つのセリフから核心を抽出
- ✅ 口語表現を削除
- ✅ インパクトのある一文に圧縮
- ✅ strong-messageテンプレートを適切に選択

---

### 入力例: 複数セリフのまとめ

```json
[
  {
    "section_id": "S003",
    "dialogue": "最初に考えるのは、「AIに全部の情報を見てほしいのかどうか」。"
  },
  {
    "section_id": "S003",
    "dialogue": "もし"全部読んだうえで判断してほしい"なら、部分検索であるRAGはあまり向いていません。"
  },
  {
    "section_id": "S003",
    "dialogue": "全文を読ませるアプローチのほうが自然です。"
  }
]
```

### 理想的な出力

```json
{
  "section_id": "S003",
  "type": "list-3",
  "props": {
    "title": "問い①：全部参照する？",
    "items": [
      "最初に考えるのは、「AIに全部の情報を見てほしいのかどうか」。",
      "もし"全部読んだうえで判断してほしい"なら、部分検索であるRAGはあまり向いていません。",
      "全文を読ませるアプローチのほうが自然です。"
    ]
  }
}
```

**評価ポイント:**
- ✅ 3つのセリフを1枚のlist-3にまとめる
- ✅ タイトルで問いの本質を明示
- ✅ セリフの内容は基本的に保持（適度な圧縮）

---

### 入力例: 5項目のまとめ

```json
[
  {
    "section_id": "S006",
    "dialogue": ""全部見たい"ならそのままプロンプトへ。"
  },
  {
    "section_id": "S006",
    "dialogue": ""上限に収まる"なら全文を入れる。"
  },
  {
    "section_id": "S006",
    "dialogue": ""パターンが少ない"ならテンプレ化。"
  },
  {
    "section_id": "S006",
    "dialogue": "この条件がそろえば、RAGは必要ありません。"
  },
  {
    "section_id": "S006",
    "dialogue": "もっとシンプルで強い方法があるからです。"
  }
]
```

### 理想的な出力

```json
{
  "section_id": "S006",
  "type": "list-5",
  "props": {
    "title": "3つの問いまとめ",
    "items": [
      ""全部見たい"ならそのままプロンプトへ。",
      ""上限に収まる"なら全文を入れる。",
      ""パターンが少ない"ならテンプレ化。",
      "この条件がそろえば、RAGは必要ありません。",
      "もっとシンプルで強い方法があるからです。"
    ]
  }
}
```

**評価ポイント:**
- ✅ 5つのセリフを正確にlist-5で表現
- ✅ タイトルで「まとめ」であることを明示
- ✅ セリフの簡潔さを活かしてそのまま使用

---

## チューニング時の具体的チェックリスト

プロンプトの評価時には、以下を確認してください。

### ✅ 合格基準
1. **テンプレート選択**: 各セクションで適切なテンプレートが選ばれている
2. **テキスト圧縮**: 口語が書き言葉に変換され、冗長性が排除されている
3. **論理構造**: セリフの順序と意味の塊が保持されている
4. **スライド枚数**: セクション数±2枚程度に収まっている
5. **title設定**: list系テンプレートで適切なタイトルが付けられている
6. **6個以上の禁止**: 1枚に6個以上の要素が入っていない

### ❌ 不合格パターン
1. strong-messageに長文を入れる
2. 1セリフを無理にlistに分割
3. セリフの口語表現がそのまま残る
4. section_idが混在する
5. セリフの順序が入れ替わる
6. スライド枚数が極端（3枚以下 or 20枚以上）

---

## プロンプト改善の方向性

### 改善すべき点が見つかった場合の指針

1. **テンプレート選択が不適切**
   → 「テンプレート一覧と使い分けルール」に具体例を追加

2. **テキストが冗長**
   → 「口語は短く圧縮し、主語と述語を明確にする」を強調

3. **構造が崩れる**
   → 「台本の順番を尊重する」「同じsection_idをまとめる」を明記

4. **スライド枚数が不適切**
   → 「1セクション = 1スライド を基本とする」を追加

5. **titleが不明瞭**
   → 「titleは問いや結論を端的に示す」例を追加
